<html>

<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.1/css/bootstrap.min.css">
<style type="text/css">
body { padding: 15px; }
</style>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<button id="connection" type="button" class="btn btn-primary">Connexion</button>
<button id="auth" type="button" class="btn btn-primary">Auth</button>
<button id="join" type="button" class="btn btn-primary">Join pool</button>
<button id="ready" type="button" class="btn btn-primary">Ready <em>(start search)</em></button>

<p><br />
  Username : <input type="text" id="username" value="alfo" /><br />
  Pool ID : <input type="text" id="poolId" value="0" /></input>
</p>

<br /><br />
<pre id="console" style="border: 1px dotted grey; padding: 10px;width: 600px;"><strong>Console Log :</strong><br /><br /></pre>


<script>
	var socket = undefined;

	$('#connection').click(function () {
    if(socket == undefined) {
		  socket = io.connect('10.42.1.1:1337');
		  $('#console').append('Connected<br>');


      // In
      socket.on('welcome', function (data) {
          console.log(data);
          $('#console').append('Server has send welcome message. Your name is : ' + data + '<br />');
      });

      socket.on('service', function (data) {
          console.log(data);
          $('#console').append('Service message : ' + data.msg + '<br />');
      });

      socket.on('players', function (data) {
          console.log(data);
          $('#console').append('Current players : ' + data.players + '<br />');
      });

    } else {
      $('#console').append('Already connected<br>');
    }


	});


  // Out
  $('#join').click(function () {
    socket.emit('join', {pool: $('#poolId').val()}); 
    $('#console').append('<strong>Trying to join pool...</strong><br>');
  });

  $('#auth').click(function () {
    socket.emit('auth', {username: $("#username").val() , token: 'abc'}); 
    $('#console').append('<strong>Trying to auth...</strong><br>');
  });

  $('#ready').click(function () {
    socket.emit('ready', null); 
    $('#console').append('<strong>Ready to fight. Looking for a game...</strong><br>');
  });



  // In
  /*socket.on('welcome', function (data) {
        console.log(data);
        $('#console').append('Server has send welcome message');
    });*/
  /*socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });

  socket.emit('set nickname', 'alfo', function (data) {
  	console.log(data);
  });
  socket.emit('msg', 'test', function (data) {
  	console.log(data);
  });*/
</script>


</html>
